<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="videoplayer2style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">
    <title>custom video player</title>
</head>
<body>
    <!--Video and control bar container-->
    <div id="videoplayer-box">
        <!--Video-->
        <video autoplay id= "myVideo">
            <source src="test-video.mp4">
        </video>
        <!--Control bar with buttons-->
        <div id="controls-bar">
            <!--Play-Pause button, slider, time in "mins/secs", mute button, 
                volume slider, full screen-->
            <button id="play-pause"><i class="fa fa-play"></i></button>
            <input id="seekslider" type="range" min="0" max="100" value="0" step="1">
            <span id="curtimetext">00:00</span> / <span id="durtimetext">00:00</span>
            <button id="mutebtn"><i class='fa fa-volume-up'></i></button>
            <input id="volumeslider" type="range" min="0" max="100" value="100" step="1">
            <select name="" id="speedlist">
                <option value="1">speed</option>
                <option value="0.5">0.5</option>
                <option value="1">normal speed</option>
                <option value="1.5">1.5</option>
                <option value="2">2</option>
            </select>
            <button id="fullscreenbtn"><i class='fa fa-expand'></i></button>            
                       
        </div>
    </div>
    <script>
        var video, playbtn, seekslider, curtimetext, durtimetext;
        var mutebtn, volumeslider, fullscreenbtn, speedlist;

        function initializePlayer(){
            // object references
            video = document.getElementById('myVideo');
            playbtn = document.getElementById('play-pause');
            seekslider = document.getElementById('seekslider');
            curtimetext = document.getElementById('curtimetext');
            durtimetext = document.getElementById('durtimetext');
            mutebtn = document.getElementById('mutebtn');
            volumeslider = document.getElementById('volumeslider');
            fullscreenbtn = document.getElementById('fullscreenbtn');
            speedlist = document.getElementById('speedlist');
            // event listeners
            playbtn.addEventListener("click",playPause,false);
            seekslider.addEventListener("change",vidSeek,false);
            video.addEventListener("timeupdate",seektimeupdate,false);
            video.addEventListener("click",playPause,false);
            mutebtn.addEventListener("click",vidMute,false);
            volumeslider.addEventListener("change",setvolume,false);
            fullscreenbtn.addEventListener("click",fullScreen,false);
            speedlist.addEventListener("change",changespeed,false);
        }
        window.onload = initializePlayer;

        //toggle between play and pause button
        function playPause(){
            
            if(video.paused){
                video.play();
                playbtn.innerHTML= '<i class="fa fa-pause"></i>';
            } else{
                video.pause();
                playbtn.innerHTML= '<i class="fa fa-play"></i>';
            }
        }

        //play the video on cliking the video
        

        // seek the video to a particular time
        function vidSeek(){
            var seekto= video.duration * (seekslider.value / 100);
            video.currentTime = seekto;
        }

        //move the progress of the video slider
        function seektimeupdate(){
            var newTime= video.currentTime * (100/ video.duration);
            seekslider.value = newTime; 
            var curmins = Math.floor(video.currentTime / 60);//Math.floor is to round up the no
            var cursecs = Math.floor(video.currentTime - curmins * 60);
            var durmins = Math.floor(video.duration / 60); // we can also use Math.ceil or Math.round
            var dursecs = Math.floor(video.duration - durmins * 60);
            //if it is a single digit then prepend 0
            if(cursecs < 10){cursecs = "0"+cursecs;}
            if(dursecs < 10){dursecs = "0"+dursecs;}
            if(curmins < 10){curmins = "0"+curmins;}
            if(durmins < 10){durmins = "0"+durmins;}
            curtimetext.innerHTML = curmins+":"+cursecs;
            durtimetext.innerHTML = durmins+":"+dursecs;
            
        }

        //toggle between mute or unmute
        function vidMute(){
            if(video.muted){
                video.muted = false;
                mutebtn.innerHTML= "<i class='fa fa-volume-up'></i>";
                volumeslider.value = 100;
            } else{
                video.muted = true;
                mutebtn.innerHTML= "<i class='fa fa-volume-off'></i>";
                volumeslider.value= 0;
            }
        }

        //calculate and set the volume according to slider movement
        function setvolume(){
            video.volume = volumeslider.value / 100;
            if(video.volume===0){
                mutebtn.innerHTML= "<i class='fa fa-volume-off'></i>";
            }
            else {
                mutebtn.innerHTML= "<i class='fa fa-volume-up'></i>";
            }
        }

        //toggle to full screen mode
        function fullScreen(){
            if(video.requestFullScreen){
                video.requestFullScreen();
               
            } else if(video.webkitRequestFullScreen){
                video.webkitRequestFullScreen();
                
            } else if(video.mozRequestFullScreen){
                video.mozRequestFullScreen();
              
            }
        }

        //change the playback speed of the video
        function changespeed(event){
            video.playbackRate = event.target.value;//or speedlist.value
        }
    </script>
</body>
</html>
