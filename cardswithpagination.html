<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="paginationstyle.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css">
    <link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet">
    <title>Cards with pagination</title>
</head>

<body>
    <div class="container">

        <div class="filters">
            <!--Filter1 for Make-->
            <select name="slct1" class="select" id="slct1" onchange="populate(this.id,'slct2')">
                <option value="Make">Make</option>
                <option value="Audi">Audi</option>
                <option value="BMW">BMW</option>
                <option value="Ford">Ford</option>
                <option value="Honda">Honda</option>
                <option value="Hyundai">Hyundai</option>
                <option value="Jaguar">Jaguar</option>
                <option value="Jeep">Jeep</option>
                <option value="Kia">Kia</option>
                <option value="Mercedes-Benz">Mercedes-Benz</option>
                <option value="Nissan">Nissan</option>
                <option value="Suzuki">Suzuki</option>
                <option value="Toyota">Toyota</option>
                <option value="Volkswagen">Volkswagen</option>
            </select>

            <!--Filter2 for Model-->
            <select name="slct2" class="select" id="slct2" onchange="modelSelect(this.id)">
                <option value="Model">Model</option>
            </select>

            <!--Filter3 for Year-->
            <select name="slct3" class="select" id="slct3" onchange="yearSelect(this.id)">
                <option value="Year">Year</option>
                <option value="1972">1972</option>
                <option value="1986">1986</option>
                <option value="1997">1997</option>
                <option value="2003">2003</option>
                <option value="2005">2005</option>
                <option value="2006">2006</option>
                <option value="2007">2007</option>
                <option value="2010">2010</option>
                <option value="2011">2011</option>
                <option value="2014">2014</option>
                <option value="2015">2015</option>
                <option value="2016">2016</option>
                <option value="2017">2017</option>
                <option value="2018">2018</option>
                <option value="2019">2019</option>
                <option value="2020">2020</option>
            </select>

            <!--Filter4 for Inventory Type-->
            <select name="slct4" class="select" id="slct4" onchange="typeSelect(this.id)">
                <option value="Inventory Type">Inventory Type</option>
                <option value="New">New</option>
                <option value="Used">Used</option>
            </select>
        </div>

        <!--To display number of Items per page and Sort by-->
        <div class="item">
            <div class="numofpages">
                [<span class="start"></span> - <span class="end"></span> of <span class="totalItems"></span>]
            </div>
            <div class="sortelement">
                <select name="slct5" class="select" id="slct5" onchange="sortCards(this.id)">
                    <option value="Sort By">Sort By</option>
                    <option value="Make">Make</option>
                    <option value="Model">Model</option>
                    <option value="Year">Year</option>
                </select>
            </div>
        </div>

        <!--Cards Begin from here-->
        <div class="row">
            <!--1st card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--2nd card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--3rd card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--4th card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--5th card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--6th card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--7th card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--8th card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--9th card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--10th card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--11th card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--12th card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--13th card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--14th card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--15th card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--16th card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--17th card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--18th card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--19th card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--20th card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--21st card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--22nd card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--23rd card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--24th card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
            <!--25th card-->
            <div class="profile-card">
                <div class="profile-content">
                    <div class="profile-image">
                        <img class="cardimg" src="images/Friends at sunset.png" alt="first">
                    </div>
                    <div class="desc">
                        <p class="title"></p>
                    </div>
                </div>
            </div>
        </div>
        <div class="pagination">
            <div class="prev">Prev</div>
            <div class="page">Page <span class="Page-num"></span> / <span class="total"></span></div>
            <div class="next">Next</div>
        </div>
    </div>

    <script>

        var title = document.getElementsByClassName("title");
        var cardimg = document.querySelectorAll(".cardimg");
        var card = document.getElementsByClassName("profile-card");
        var start = document.querySelector(".start");
        var end = document.querySelector(".end");

        var prev = document.querySelector(".prev");
        var next = document.querySelector(".next");
        var page = document.querySelector(".page-num");
        var item = document.querySelector(".item");
        var modelCard = [];
        var make = [];
        var model = [];
        var year = [];
        var type = [];
        const maxItem = 8;
        let maxcards = maxItem;
        const totalPages = Math.ceil(card.length / maxItem);

        let rangeStart = 1;

        let index = 1;
        const pagination = Math.ceil(card.length / maxItem);

        prev.addEventListener("click", goPrev, false);
        next.addEventListener("click", goNext, false);

        document.querySelector(".total").innerHTML = totalPages;
        document.querySelector(".totalItems").innerHTML = card.length;

        //function for showing or hiding cards
        function showItems() {
            for (var i = 0; i < card.length; i++) {
                card[i].classList.remove("show");
                card[i].classList.add("hide");
                if (i >= (index * maxItem) - maxItem && i < index * maxItem) {
                    card[i].classList.remove("hide");
                    card[i].classList.add("show");
                }
                page.innerHTML = index;
                start.innerHTML = rangeStart;
                end.innerHTML = maxcards;
            }
        }

        window.onload = function () {
            showItems();
            check();
        }

        //to disable the next and previous links when we reach the ends
        function check() {
            if (index == pagination) {
                next.classList.add("disabled");
                maxcards = maxcards - maxItem + 1;
            } else {
                next.classList.remove("disabled");
            }

            if (index == 1) {
                prev.classList.add("disabled");
            } else {
                prev.classList.remove("disabled");
            }
        }
        //function to populate the second select list with the items of the first one
        function populate(s1, s2) {
            var S1 = document.getElementById(s1);
            var S2 = document.getElementById(s2);
            S2.innerHTML = "";
            if (S1.value == "Make") {
                showItems();
                check();
                var optionArray = ["Model|Model"];
            } else if (S1.value == "Audi") {
                var optionArray = ["|", "A6|A6", "Q8|Q8"];
                display(S1.value);
            } else if (S1.value == "BMW") {
                var optionArray = ["|", "Z4|Z4", "X1|X1"];
                display(S1.value);
            } else if (S1.value == "Ford") {
                var optionArray = ["|", "Endeavour|Endeavour", "Freestyle|Freestyle"];
                display(S1.value);
            } else if (S1.value == "Honda") {
                var optionArray = ["|", "Civic|Civic", "WRV|WRV"];
                display(S1.value);
            } else if (S1.value == "Hyundai") {
                var optionArray = ["|", "Creta|Creta", "Verna|Verna"];
                display(S1.value);
            } else if (S1.value == "Jaguar") {
                var optionArray = ["|", "XF|XF", "FPACE|FPACE"];
                display(S1.value);
            } else if (S1.value == "Jeep") {
                var optionArray = ["|", "Wrangler|Wrangler", "Compass|Compass"];
                display(S1.value);
            } else if (S1.value == "Kia") {
                var optionArray = ["|", "Seltos|Seltos", "Sonet|Sonet"];
                display(S1.value);
            } else if (S1.value == "Mercedes-Benz") {
                var optionArray = ["|", "A-Class|A-Class", "AMG GT|AMG GT"];
                display(S1.value);
            } else if (S1.value == "Nissan") {
                var optionArray = ["|", "GT-R|GT-R", "KICKS|KICKS"];
                display(S1.value);
            } else if (S1.value == "Suzuki") {
                var optionArray = ["|", "Swift|Swift", "Baleno|Baleno"];
                display(S1.value);
            } else if (S1.value == "Toyota") {
                var optionArray = ["|", "Fortuner|Fortuner", "Crysta|Crysta"];
                display(S1.value);
            } else if (S1.value == "Volkswagen") {
                var optionArray = ["|", "Vento|Vento"];
                display(S1.value);
            }
            for (var option in optionArray) {
                var pair = optionArray[option].split("|");
                var newOption = document.createElement("option");
                newOption.value = pair[0];
                newOption.innerHTML = pair[1];
                S2.options.add(newOption);
            }
        }

        //to display only the cards of the selected brand
        function display(selectedMa) {
            var newmaxcard = 0;
            for (var i = 0; i < card.length; i++) {
                card[i].classList.remove("show");
                card[i].classList.add("hide");
                if (make[i] == selectedMa) {
                    card[i].classList.remove("hide");
                    card[i].classList.add("show");
                    newmaxcard += 1;
                }
            }
            if (newmaxcard < maxItem) {
                next.classList.add("disabled");
            }
            end.innerHTML = newmaxcard;
            document.querySelector(".total").innerHTML = 1;
        }

        //filter according to the Model
        function modelSelect(selectedMo) {
            var newmaxcard1 = 0;
            var newmodel = document.getElementById(selectedMo);
            for (var i = 0; i < card.length; i++) {
                card[i].classList.remove("show");
                card[i].classList.add("hide");
                if (model[i] == newmodel.value) {
                    card[i].classList.remove("hide");
                    card[i].classList.add("show");
                    newmaxcard1 += 1;
                }
            }
            if (newmaxcard1 < maxItem) {
                next.classList.add("disabled");
            }
            end.innerHTML = newmaxcard1;
            document.querySelector(".total").innerHTML = 1;
        }

        //filter according to the Year
        function yearSelect(selectedY) {
            var newmaxcard2 = 0;
            var newyear = document.getElementById(selectedY);
            if (newyear.value == "Year") {
                showItems();
                check();
            } else {
                for (var i = 0; i < card.length; i++) {
                    card[i].classList.remove("show");
                    card[i].classList.add("hide");
                    if (year[i] == newyear.value) {
                        card[i].classList.remove("hide");
                        card[i].classList.add("show");
                        newmaxcard2 += 1;
                    }
                }
                if (newmaxcard2 < maxItem) {
                    next.classList.add("disabled");
                }
                end.innerHTML = newmaxcard2;
                document.querySelector(".total").innerHTML = 1;
            }
        }

        //filter according to the Type
        function typeSelect(selectedT) {
            var newmaxcard3 = 0;
            var newtype = document.getElementById(selectedT);
            if (newtype.value == "Inventory Type") {
                showItems();
                check();
            } else {
                for (var i = 0; i < card.length; i++) {
                    card[i].classList.remove("show");
                    card[i].classList.add("hide");
                    if (type[i] == newtype.value) {
                        card[i].classList.remove("hide");
                        card[i].classList.add("show");
                        newmaxcard3 += 1;
                    }
                }
                next.classList.add("disabled");
                end.innerHTML = newmaxcard3;
                document.querySelector(".total").innerHTML = 1;
            }
        }

        //function to sort Cards
        function sortCards(selectedS) {
            var sortBy = document.getElementById(selectedS);
            var ourRequest = new XMLHttpRequest();
            ourRequest.open('GET', 'https://tejas-deshpande1989.github.io/git-one/car-details.json');
            ourRequest.onload = function () {
                var ourData = JSON.parse(ourRequest.responseText);
                if (sortBy.value == "Sort By") {
                    ourData.sort(byMake);
                    renderHTML(ourData);
                } else if (sortBy.value == "Year") {
                    ourData.sort(byYear);
                    renderHTML(ourData);
                } else if (sortBy.value == "Make") {
                    ourData.sort(byMake);
                    renderHTML(ourData);
                } else if (sortBy.value == "Model") {
                    ourData.sort(byModel);
                    renderHTML(ourData);
                }
            };
            ourRequest.send();
        }

        //sort by Year
        function byYear(a, b) {
            if (a.Year > b.Year) {
                return 1;
            } else if (b.Year > a.Year) {
                return -1;
            } else {
                return 0;
            }
        }

        //sort by Make
        function byMake(a, b) {
            if (a.Make > b.Make) {
                return 1;
            } else if (b.Make > a.Make) {
                return -1;
            } else {
                return 0;
            }
        }

        //sort by Model
        function byModel(a, b) {
            if (a.Model > b.Model) {
                return 1;
            } else if (b.Model > a.Model) {
                return -1;
            } else {
                return 0;
            }
        }
        //functions for prev and next pagination
        function goPrev() {
            index--;
            rangeStart = rangeStart - maxItem;
            maxcards = maxcards - maxItem;
            check();
            showItems();
        }

        function goNext() {
            index++;
            rangeStart = rangeStart + maxItem;
            maxcards = maxcards + maxItem;
            check();
            showItems();
        }

        //accessing JSON file through AJAX
        var ourRequest = new XMLHttpRequest();
        ourRequest.open('GET', 'https://tejas-deshpande1989.github.io/git-one/car-details.json');
        ourRequest.onload = function () {
            var ourData = JSON.parse(ourRequest.responseText);
            renderHTML(ourData);
        };
        ourRequest.send();

        //to get the data from the JSON file and rendering into HTML
        function renderHTML(data) {
            for (var i = 0; i < 25; i++) {
                title[i].innerHTML = data[i].Title;
                cardimg[i].src = data[i].Img;
                make[i] = data[i].Make;
                model[i] = data[i].Model;
                year[i] = data[i].Year;
                type[i] = data[i].InventoryType;
            }

        }
    </script>
</body>

</html>
